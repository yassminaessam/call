# خارطة الطريق (Roadmap) - نظام الاتصالات المتكامل

## 0) تعريف النطاق (Feature Parity Map)

رتّبت الميزات إلى حزم (Epics)، وكل بند تحته مخرجات (Deliverables) وقبول (Acceptance).

### سياسة التطوير ثنائي اللغة (Bilingual Development Policy)

> جميع المخرجات (شاشات، نصوص واجهة، رسائل أخطاء، تنبيهات، تقارير، توثيق واجهة المستخدم) تُنفَّذ منذ البداية بدعم كامل للغتين: العربية (RTL) والإنجليزية (LTR). أي إضافة/ميزة جديدة لا تُعتبر مكتملة قبل:
>
> 1. إضافة مفاتيح الترجمة (i18n keys) في مصدر واحد (TranslationContext أو نظام استخراج لاحق).
> 2. توفير ترجمة عربية + إنجليزية صحيحة (وبالإمكان لاحقاً إضافة الفرنسية بدون إعادة هيكلة).
> 3. اختبار التبديل الفوري بين اللغتين دون إعادة تحميل (Hot Locale Switch).
> 4. التحقق من سلامة الاتجاه (direction) والمحاذاة (logical CSS: start/end بدلاً من left/right) وعدم انعكاس الأيقونات الحساسة دلالياً.
> 5. اجتياز قائمة تحقق RTL (Typography, Flex order, Icons mirroring, Charts labels, Tables overflow).
> 6. عدم وجود نصوص صلبة (Hard‑coded strings) في المكونات؛ يجب أن تمر كل النصوص عبر دالة t().

#### معايير قبول عامة (Global Acceptance Addendum)

يُضاف تلقائياً لكل القصص / الميزات:

- جميع النصوص متوفرة بلغتين وتعمل الدوال الشرطية (Pluralization / Interpolation) بشكل صحيح.
- دعم أرقام عربية هندية اختيارياً في واجهات التقارير (قابلة للتفعيل لاحقاً).
- لا تجاوز في التخطيطات عند التحول إلى العربية (No layout overflow in RTL).
- تم فحص الوصولية: اتجاه التركيز (Focus order) سليم في RTL، وعلامات aria-label مترجمة.
- تمت إضافة اختبارات وحدات/لقطات (Snapshot) للتحقق من وجود المفاتيح الأساسية.

#### خطة تعزيز i18n (Incremental i18n Enhancement)

1. المرحلة الحالية: TranslationContext مركزي.
2. المرحلة القادمة: استخراج تلقائي (Extraction Script) يبحث عن النصوص الصلبة ويولّد تقرير إنذار.
3. إدخال layer للـ ICU message format لدعم الجمع (plural) والمتغيرات الديناميكية المتقدمة.
4. إضافة lint rule (eslint-plugin-i18n-no-hardcoded) لمنع النصوص الصلبة.
5. دمج اختبار بصري (Percy أو Storybook RTL addon) للمقارنة بين RTL/LTR.

---

### A. قنوات التواصل (Omnichannel)

#### 1. واجهة موحّدة للصوت والواتساب

- **المخرجات**: Voice + WhatsApp في واجهة واحدة (قائمة العملاء، تاريخ المحادثة، ملاحظات/وسوم/مرفقات)
- **قبول**: شاشة موحّدة تُظهر سجل المكالمات والواتساب لنفس العميل، دعم عربي/إنجليزي/فرنسي وRTL
- **مرجع**: ziwo.io

#### 2. نقل المحادثة بين الفرق

- **المخرجات**: نقل المحادثة بين الفرق مع الحفاظ على التاريخ وملف العميل (أرقام متعددة/مرفقات)
- **قبول**: تَسليم المحادثة لزميل/قسم مع كامل السياق
- **مرجع**: ziwo.io

#### 3. مُرفقات واتساب متكاملة

- **المخرجات**: مُرفقات واتساب من داخل النظام
- **قبول**: إرسال/استقبال ملف (PDF/صورة/صوت) عبر WhatsApp API
- **مرجع**: ziwo.io

#### 4. إدارة حدود الرسائل

- **المخرجات**: حد رسائل واتساب (للمقارنة/التهيئة)
- **قبول**: تنبيه استخدام شهري وعرض المتبقّي للوكيل
- **مرجع**: ziwo.io

### B. إدارة المكالمات (Inbound/Outbound)

#### 1. نظام IVR متقدم

- **المخرجات**: IVR مصمم بصريًا + إدارة الطوابير (Queues) + ACD Routing بالمهارات/اللغة
- **قبول**: منشئ تدفّق Drag-and-Drop، نشر لحظي دون توقف
- **مرجع**: ziwo.io

#### 2. تسجيل متقدم للمكالمات

- **المخرجات**: HD Calling، تسجيل مكالمات مع إيقاف/استئناف أثناء معلومات حساسة (PCI/هوية)
- **قبول**: زر Pause/Resume في واجهة الوكيل ووسم المقطع غير المسجّل
- **مرجع**: ziwo.io

#### 3. نظام الاتصال الآلي

- **المخرجات**: Z-Dial (Outbound Dialer)، Click-to-Call من شاشة العميل
- **قبول**: تشغيل قوائم اتصال آليًا مع قواعد إيقاع (Preview/Power/Auto)
- **مرجع**: ziwo.io
- **أولوية**: +1

#### 4. إشراف المكالمات

- **المخرجات**: Call Whisper/Barge للمشرف (استماع/همس/الانضمام)
- **قبول**: دور مشرف ثالث في المكالمة مع صلاحيات واضحة وسجل تدقيق
- **مرجع**: ziwo.io
- **أولوية**: +1

### C. التحليلات واللوحات

#### 1. لوحات المراقبة الحية

- **المخرجات**: لوحات حية وتقارير مخصّصة (AHT, SLA, Service Level, Abandoned, CSAT, QA)
- **قبول**: منشئ تقارير Query-Builder + جداول زمنية وتصدير CSV
- **مرجع**: ziwo.io
- **أولوية**: +1

#### 2. مراقبة الجودة التقنية

- **المخرجات**: تنبيهات لحظية عن جودة الشبكة/الأجهزة للوكيل والمشرف
- **قبول**: تحذير داخل التطبيق مع توصيات إصلاح
- **مرجع**: ziwo.io

> **قبول ثنائي اللغة مضاف**: رسائل التنبيه مترجمة، تظهر الاتجاه الصحيح، والأرقام منسقة حسب اللغة.

### D. التكاملات والـAPI

#### 1. موصلات CRM جاهزة

- **المخرجات**: موصلات جاهزة لـ Zendesk/Salesforce/Zoho/HubSpot/Freshdesk…
- **قبول**: تثبيت بنقرة وتزامن جهات اتصال وتذاكر ومكالمات
- **مرجع**: ziwo.io

> **قبول ثنائي اللغة مضاف**: شاشة إعداد الموصل (Connector Setup Wizard) تدعم اللغتين، وأسماء الحقول/الأخطاء مترجمة.

#### 2. بوابة API شاملة

- **المخرجات**: بوابة API عامة (500+ Endpoint) + Webhooks للأحداث
- **قبول**: توثيق OpenAPI وحصص Rate Limits ومفاتيح OAuth2
- **مرجع**: ziwo.io

> **قبول ثنائي اللغة مضاف**: صفحة التوثيق المصغّرة داخل المنتج (Embedded Docs) تعرض العناوين/الوصف باللغتين.

### E. الجودة والموثوقية/الأمن

#### 1. ضمان الخدمة

- **المخرجات**: 99.99% Uptime هدف خدمة، PoPs محلية، تعدّد مزودين (Carriers)
- **قبول**: لوحة حالة وإستراتيجية تحوّل تلقائي Carrier Failover
- **مرجع**: ziwo.io

> **قبول ثنائي اللغة مضاف**: لوحة الحالة تعرض الحالات (Operational / Degraded / Outage) مترجمة ومتوافقة RTL.

#### 2. الامتثال والأمن

- **المخرجات**: امتثال ISO 27001 وGDPR وخيارات استضافة محلية داخل الدولة
- **قبول**: سياسات أمن، DPA، تشفير TLS/SRTP، سجلات تدقيق
- **مرجع**: ziwo.io
- **أولوية**: +1

> **قبول ثنائي اللغة مضاف**: صفحات السياسات (Privacy / Security) تملك نسختين بالعربية والإنجليزية مع مؤشر لغة.

## 1) المعمارية المقترحة (Target Architecture)

### Frontend

- **Agent & Admin**: Next.js/React (دعم RTL بالكامل)
- **WebRTC UI**: State via Redux/RTK Query
  - **i18n Layer**: t() wrapper + dynamic direction (html[dir]) + logical CSS utilities + planned extraction pipeline.

### خدمات الخلفية (TypeScript/Node.js)

#### خدمات الاتصالات

- **Voice Gateway**: SIP over WebSocket عبر Kamailio + RTPengine أو FreeSWITCH مع جسر WebRTC
- **Contact & Conversations**: PostgreSQL — العملاء، الأرقام، التاريخ، الوسوم/الملاحظات/المرفقات

#### خدمات المعالجة

- **IVR/Flow Engine**: Node + Redis + BullMQ لتنفيذ المسارات آنيًا
- **Dialer Service**: قوائم الاتصال (حالات المكالمة، إعادة المحاولة، إيقاع المكالمات)
- **Recording/Storage**: Pause/Resume وPII Masking وKMS للتشفير

#### التحليلات والمراقبة

- **Analytics Pipeline**: Kafka → ClickHouse (مقاييس لحظية) + DBT للنمذجة
- **Integrations Hub**: Connectors + OAuth2 + Webhooks
- **Notifications & Quality**: مؤشرات الشبكة/الأجهزة للوكيل

#### الأمن والهوية

- **أمن وهوية**: Keycloak (SSO, RBAC), WAF, mTLS بين الخدمات، تشفير في الراحة (AES-256)

#### التشغيل والمراقبة

- **تشغيل**: Kubernetes (K8s) متعدد المناطق، IaC بـ Terraform
- **Observability**: OpenTelemetry + Prometheus + Grafana + Loki، Sentry للأخطاء

#### الاستضافة

- **الاستضافة والبيانات**: سحابة محايدة وقابلة للاستضافة محليًا (متطلب مشابه لـ ZIWO)

## 2) المكدس التقني لقنوات الاتصال

### الصوت/WebRTC

- **البروتوكولات**: SIP over WebSocket (RFC 7118)، STUN/TURN، SRTP
- **الضبط**: ضبط Codec (Opus/G.711) لمصر/المنطقة

### WhatsApp Business

- **التكامل**: Meta Cloud API + قوالب رسائل + Webhooks + إدارة الجلسات
- **الحدود**: حد الاستخدام (لوحة متابعة للـ 4000/شهر/وكيل كمرجع ضبط)
- **مرجع**: ziwo.io

### قنوات إضافية

- **SMS/Email**: موحّد رسائل مستقبلاً (اختياري)

### التكاملات

- **موصلات رسمية**: لكل CRM مذكور، مع Screen-pop وClick-to-Call وSync
- **مرجع**: ziwo.io

## 3) خطة التنفيذ بالأسابيع (Timeline تقديري واقعي)

### المرحلة 0 — اكتشاف/منتج (2 أسابيع)

- **الأهداف**:
  - توثيق كامل لسيناريوهات ZIWO الموافقة لعملك + مصفوفة Gap
  - تصميم UX عربي/إنجليزي/فرنسي (RTL/LTR)
- **مخرجات**: SRS, HLD, UI kit

### المرحلة 1 — الأساس الصوتي والعمود الفقري (4–6 أسابيع)

- **الأهداف**:
  - إعداد SBC/WebRTC، تسجيل، CDR، Click-to-Call
  - تخزين آمن للتسجيلات مع Pause/Resume
  - بناء خدمات Contact/Conversations + RBAC أساسي
- **مرجع**: ziwo.io

### المرحلة 2 — إدارة الوكلاء والـIVR/الطوابير (5–7 أسابيع)

- **الأهداف**:
  - منشئ IVR مرئي، Queues/ACD بالمهارات/اللغة
  - تحويل داخلي/خارجي
  - Whisper/Listen/Barge للمشرف + سجل تدقيق
- **مرجع**: ziwo.io

### المرحلة 3 — واتساب موحّد (4–6 أسابيع)

- **الأهداف**:
  - واجهة موحّدة Voice/WhatsApp مع تاريخ مشترك
  - نقل محادثة، ملاحظات/وسوم/مرفقات
  - إرسال مرفقات عبر WhatsApp
- **مرجع**: ziwo.io

### المرحلة 4 — التحليلات والتقارير (4–6 أسابيع)

- **الأهداف**:
  - لوحات حية (AHT, SLA…)
  - منشئ تقارير، تنبيهات جودة الشبكة داخل التطبيق
- **مرجع**: ziwo.io
- **أولوية**: +1

### المرحلة 5 — التكاملات والـAPI العام (3–5 أسابيع)

- **الأهداف**:
  - موصلات Zendesk/Salesforce/Zoho/HubSpot…
  - بوابة API (OpenAPI) + Webhooks
- **مرجع**: ziwo.io

### المرحلة 6 — الاعتمادية/الأمن والامتثال (متداخل ومستمر)

- **الأهداف**:
  - اختبارات تحمّل، استراتيجية تعدد المزوّدين
  - هدف 99.99%، وثائق ISO27001/سياسات GDPR
  - خيارات استضافة محلية
- **مرجع**: ziwo.io
- **أولوية**: +1

**ملاحظة**: يمكنك إطلاق MVP بعد المرحلة 2–3 (صوت + IVR + Whisper + واجهة موحّدة أساسية)، ثم إضافة التقارير والتكاملات تباعًا.

### إضافة تخص i18n في المخطط الزمني

| المرحلة | عنصر i18n | الناتج |
|---------|-----------|--------|
| 0 | تعريف سياسة المفاتيح، إعداد RTL، checklist | وثائق + تفعيل RTL عالمي |
| 1 | تغطية صوت وواجهة أساسية ثنائية اللغة | لا نصوص صلبة في الوكيل الصوتي |
| 2 | IVR Builder + Queues مترجمة | دعم ديناميكي للأوصاف والمهارات |
| 3 | واجهة محادثات موحدة (Voice/WhatsApp) ثنائية اللغة | تبديل فوري دون فقد الحالة |
| 4 | التقارير: أعمدة/فلاتر مترجمة + تنسيق أرقام | دعم pluralization الأساسي |
| 5 | بوابة Connectors مترجمة | نصوص أخطاء/Logs مترجمة للمستخدم |
| 6 | سياسات أمن + شاشة SLA ثنائية اللغة | اكتمال التوثيق الداخلي باللغتين |

## 4) قصص المستخدم (نماذج مختصرة + قبول)

### للوكيل (Agent)

#### قصة 1: Click-to-Call

- **كوكيل**: أحتاج أن أضغط رقم العميل داخل CRM لإجراء اتصال فوري (Click-to-Call) ويُسجَّل في ملفه
- **قبول**: نجاح الاتصال بضغطة واحدة + إنشاء CDR في نفس بطاقة العميل
- **مرجع**: ziwo.io

#### قصة 2: إيقاف التسجيل للمعلومات الحساسة

- **كوكيل**: أوقف التسجيل لحظيًا عند أخذ بطاقة بنكية ثم استئنافه تلقائيًا
- **قبول**: شريط تسجيل يوضّح الجزء غير المسجّل ويؤمّن حجب الصوت/النص
- **مرجع**: ziwo.io

#### قصة 3: إرسال مرفقات واتساب

- **كوكيل**: أرسل ملفًا عبر واتساب من داخل نفس شاشة المحادثة وأسجّل وسومًا وملاحظات
- **قبول**: ظهور المرفق في تاريخ المحادثة المشترك Voice/WhatsApp
- **مرجع**: ziwo.io

### للمشرف (Supervisor)

#### قصة 4: مراقبة وتدريب الوكلاء

- **كمشرف**: أحتاج الاستماع/الهمس والانضمام للمكالمة دون علم العميل لتدريب الوكيل
- **قبول**: أزرار Listen/Whisper/Barge ظاهرة بدور المشرف فقط مع لوج
- **مرجع**: ziwo.io

### للعميل (Customer)

#### قصة 5: توجيه ذكي حسب اللغة

- **كعميل**: لو اتصلت يُحوّلني IVR للمتحدث العربي أو الإنجليزي حسب اختياري/التعرّف على اللغة
- **قبول**: Route حسب اللغة/المهارة، مع إحصاءات FCR/AHT
- **مرجع**: ziwo.io

## 5) القياس والـSLA

### مستويات الخدمة

#### SLA تشغيل

- **الهدف**: 99.99% شهري (≤ ~4.3 دقائق تعطل/شهر)
- **التقنية**: Carrier Failover
- **مرجع**: ziwo.io

#### QoS (جودة الخدمة)

- **المقاييس**: MOS، Packet Loss/Jitter/Latency لكل مكالمة
- **التنبيهات**: Alerts داخل التطبيق
- **مرجع**: ziwo.io

### مقاييس العمل

- **المقاييس الأساسية**: AHT, SLA, Abandon, CSAT, QA Scores
- **التقارير**: تغذية لوحات لحظية وتقارير مجدولة
- **مرجع**: ziwo.io

## 6) الأمن والامتثال

### التشفير والاتصالات

- **البروتوكولات**: TLS 1.2+، SRTP
- **التسجيلات**: تشفير التسجيلات بالمفتاح المُدار (KMS)، PII Masking

### الحوكمة والامتثال

- **المعايير**: سياسات ISO 27001 (الأصول/الوصول/النسخ/الاستمرارية)
- **حماية البيانات**: DPA، DPIA للـWhatsApp
- **مرجع**: ziwo.io

### إقامة البيانات

- **الخيارات**: استضافة محلية/إقليمية (وفق متطلبات المنطقة)

## 7) خطة الاختبارات

### اختبارات التقنية

#### الصوت

- **الأهداف**: اختبارات E2E WebRTC/SIP، فشل مزوّد، Load (آلاف المكالمات/ساعة)، قياس MOS

#### الوظيفية

- **الأهداف**: سيناريوهات IVR/Queues، Whisper/Barge، Dialer، Click-to-Call

#### Omnichannel

- **الأهداف**: واتساب (قوالب/وسائط)، نقل محادثة، تاريخ مشترك

### اختبارات الأمن

- **الأهداف**: اختبارات اختراق، فحص OWASP ASVS، فحص التسريبات في التسجيلات

### قبول المستخدم (UAT)

- **الأهداف**: قوائم تحقق للمديرين والوكلاء بالعربية

## 8) خطة التكاملات (دفعات Releases)

### المرحلة الأولى

- **التكاملات**: Zendesk + HubSpot (الأكثر شيوعًا)
- **مرجع**: ziwo.io

### المرحلة الثانية

- **التكاملات**: Salesforce/Zoho/Freshdesk

### المرحلة الثالثة

- **التكاملات**: Intercom/Pipedrive/Others

### متطلبات كل موصل

- **المصادقة**: OAuth2
- **التزامن**: مزامنة جهات الاتصال/التذاكر
- **الوظائف**: Screen-pop، Click-to-Call، Webhooks

## 9) تصميم الواجهة (RTL أولًا)

### اللوحة الموحّدة

- **التصميم**: لوحة موحّدة للمكالمات والواتساب (Tabs أو Split-pane)
- **الألوان**: ألوان مريحة، عربية/إنجليزية بالتبديل الفوري

### مكوّنات الوكيل

- **أدوات سريعة**: مفاتيح الاتصال، حالة الوكيل
- **اختصارات**: مفاتيح الاختصار لإيقاف/استئناف التسجيل
- **الإدارة**: إضافة وسم/ملاحظة

## 10) المخاطر والتخفيف

### اتصالات محلية

- **المخاطر**: تفاوت جودة/قوانين
- **التخفيف**: تعاقد مع 2 مزوّد محليين + اختبارات Load قبل الإنتاج
- **مرجع**: ziwo.io

### امتثال واتساب

- **المخاطر**: حدود/قوالب
- **التخفيف**: مراقبة الاستهلاك (يعرض المتبقّي من 4000/وكيل/شهر) وتنبيه مبكر
- **مرجع**: ziwo.io

### التكاملات الكثيفة

- **المخاطر**: تعقيد التكاملات
- **التخفيف**: عزل Connectors كخدمات مستقلة + Circuit Breaker

## 11) خطة إطلاق تدريجية (Go-Live)

### Pilot داخلي (2 أسابيع)

- **النطاق**: 5–10 وكلاء صوت + واتساب
- **الهدف**: اختبار الوظائف الأساسية

### Beta مع عميل واحد (2–4 أسابيع)

- **النطاق**: عميل واحد للاختبار الشامل
- **القياس**: قياس AHT/SLA وجودة الصوت

### General Availability

- **النطاق**: فتح التكاملات والتقارير المتقدمة
- **الضمانات**: اتفاقيات SLA رسمية

---

## ملخص المعالم الرئيسية

| المرحلة | المدة | المخرجات الرئيسية | أولوية |
|---------|-------|------------------|--------|
| 0 | 2 أسابيع | التصميم والتوثيق | عالية |
| 1 | 4-6 أسابيع | الأساس الصوتي | عالية |
| 2 | 5-7 أسابيع | IVR والإشراف | عالية |
| 3 | 4-6 أسابيع | واتساب متكامل | عالية |
| 4 | 4-6 أسابيع | التحليلات | متوسطة |
| 5 | 3-5 أسابيع | التكاملات | متوسطة |
| 6 | مستمر | الأمن والامتثال | عالية |

**إجمالي الوقت المتوقع**: 22-32 أسبوع للنظام الكامل
**MVP**: متاح بعد 15-21 أسبوع (المراحل 0-3)

---

### تحديث تقدم المرحلة 1 (Localization Egypt Baseline)

تم إنجاز الأساس ثنائي اللغة مع تفعيل دعم مصر:

1. إضافة ملف محلي `locales/ar-EG/common.json` يتضمن مفردات مصرية ورمز العملة (جنيه مصري – EGP).
2. توسيع طبقة i18n بإضافة دالة `formatCurrency` تعتمد تلقائياً EGP عند اختيار `ar-EG`.
3. تعديل `TranslationContext` لقبول تفعيل مصري (علامة تخزين محلي `crm-egypt-localization`).
4. عرض مثال إيراد بصيغة الجنيه المصري في لوحة التحكم (Dashboard) لإثبات التنسيق.
5. توحيد اتجاه RTL لكافة المتغيرات العربية (يشمل `ar-EG`).

المهام التالية (المرحلة 1 المتبقية لإتمام i18n المتقدم):

- استخراج بقية النصوص إلى ملفات JSON مجزأة بالوحدات.
- إضافة فحص تلقائي في CI لـ hard‑coded strings (دمج سكربت i18n:scan + قاعدة ESLint لاحقاً).
- دعم pluralization / ICU.
- fallback ذكي بين `ar-EG` → `ar` → `en`.

## 12) التوسع المتقدم (مراحل مستقبلية 7–12)

### المرحلة 7 — المراقبة والموثوقية المتقدمة (Observability & Reliability) (4–5 أسابيع)

- **الأهداف**:
  - ترسيخ OpenTelemetry عبر كل الخدمات (Tracing + Metrics + Logs) مع نسبة أخذ عينات (Sampling) ديناميكية حسب الخطأ.
  - تنفيذ SLOs (مستوى الخدمة الهدف) لكل واجهة حرجة: زمن رد API P95، زمن إنشاء مكالمة، زمن تفعيل IVR.
  - أتمتة اختبارات Chaos (أعطال مدروسة: فقد Carrier، تعطّل Redis، Split-Brain في Kafka).
  - تقديم لوحة SLO/Errors Budgets بالعربية/الإنجليزية.
- **المخرجات**: Dashboards موحّدة، تنبيهات استباقية، تقارير Error Budget.
- **قبول**: انخفاض زمن اكتشاف الحوادث (MTTD) وحد الاستجابة (MTTR) موثق، وإدارة Incident بلغة مزدوجة.

### المرحلة 8 — الذكاء الاصطناعي والتحليلات المتقدمة (Advanced AI & Analytics) (5–7 أسابيع)

- **الأهداف**:
  - تفريغ (Transcription) عربي/إنجليزي فوري للمكالمات + تلخيص (Summarization) سياقي.
  - تصنيف نبرة/مشاعر (Sentiment) وتحديد كيانات (NER) للأسماء والمنتجات.
  - اقتراح ردود ذكية للوكيل (Agent Assist) تعتمد تاريخ المحادثة متعدد القنوات.
  - محرك توصية للـ Next Best Action.
- **المخرجات**: خدمة ML مستقلة، واجهة إعداد نماذج، Hooks جاهزة للاستهلاك في الواجهة.
- **قبول**: دقة نموذج Sentiment ≥ 80% على مجموعة تحقق داخلية ثنائية اللغة.

### المرحلة 9 — تحسين التكاليف وFinOps (Cost Optimization & FinOps) (3–4 أسابيع متداخل)

- **الأهداف**:
  - تتبع تكلفة الدقيقة/الجلسة/المحادثة، وتوزيعها حسب العميل/الفريق.
  - تنبيهات Budget (استهلاك الاتصالات/الذكاء الاصطناعي) مع حدود شهرية.
  - سياسات إطفاء بيئات غير نشطة (Ephemeral Envs) + ضغط تسجيلات قديمة.
  - تحليل تكلفة الميزات (Feature Cost Attribution) لتسعير مرن لاحقًا.
- **المخرجات**: لوحة Cost Explorer داخل النظام.
- **قبول**: تقارير أسبوعية تلقائية للبريد (عربي/إنجليزي) تلخّص أعلى 5 بنود تكلفة.

### المرحلة 10 — التوسع العالمي والامتثال الإقليمي (Global Expansion & Regional Compliance) (5–6 أسابيع)

- **الأهداف**:
  - دعم مراكز بيانات متعددة (Multi-Region Active/Active) وتوجيه حسب أقرب منطقة.
  - طبقة تحديد موقع البيانات (Data Residency Layer) لعزل سجلات المكالمات وPII.
  - إضافات امتثال محلي (مثل: PCI DSS لمعاملات الدفع، قانون حماية البيانات المحلي لكل دولة).
  - تحسين تأخير (Latency) عبر Anycast / GeoDNS.
- **المخرجات**: Policy Engine يفرض قواعد مكان البيانات، وثائق امتثال محدثة.
- **قبول**: اختبارات Failover ناجحة في تمرين سنوي + إثبات عزل بيانات ببرهنة (Audit Report مختصر).

### المرحلة 11 — إنتاجية المطور والأتمتة (Developer Productivity & Automation) (3–4 أسابيع)

- **الأهداف**:
  - منصة داخلية للخدمات (Internal Developer Platform) لتوليد خدمات Template (Boilerplate + Observability + Security Guards).
  - Pipeline موحّد (CI/CD) مع فحوص Quality Gates (Lint, Test, Security Scan, i18n Scan) إلزامية.
  - ChatOps (دمج مع Slack/Teams) لإطلاقات ورسائل Incident وملخصات Build.
  - مقاييس DORA (Deployment Frequency, Lead Time, MTTR, Change Failure Rate) مع لوحة.
- **المخرجات**: أوامر CLI لتوليد خدمة جديدة + وثائق هندسية.
- **قبول**: تقليص زمن تجهيز خدمة جديدة < 30 دقيقة.

### المرحلة 12 — النمو الاستراتيجي والسوق (Strategic Growth & Marketplace) (4–6 أسابيع)

- **الأهداف**:
  - Marketplace إضافات/Apps (مكونات، تقارير، Bots) يمكن تثبيتها.
  - Billing & Subscription Layer (خطط استخدام دقيقة/محادثة، حزم AI إضافية).
  - برنامج شركاء / Resellers بدعم لغوي متعدد.
  - تجربة Onboarding مرنة (Wizard مترجم + تلميحات سياقية).
- **المخرجات**: نظام Add-ons، بوابة فواتير، واجهة إدارة الخطط.
- **قبول**: تركيب إضافة خارجية (Connector أو Widget) دون نشر جديد للنظام.

---

## تحديث جدول المعالم الموسّع

| المرحلة | المدة | المخرجات الرئيسية | أولوية |
|---------|-------|------------------|--------|
| 0 | 2 أسابيع | التصميم والتوثيق | عالية |
| 1 | 4-6 أسابيع | الأساس الصوتي | عالية |
| 2 | 5-7 أسابيع | IVR والإشراف | عالية |
| 3 | 4-6 أسابيع | واتساب متكامل | عالية |
| 4 | 4-6 أسابيع | التحليلات | متوسطة |
| 5 | 3-5 أسابيع | التكاملات | متوسطة |
| 6 | مستمر | الأمن والامتثال | عالية |
| 7 | 4-5 أسابيع | مراقبة متقدمة/SLO | عالية |
| 8 | 5-7 أسابيع | AI متقدم وتحليلات | عالية |
| 9 | 3-4 أسابيع | FinOps وتكلفة | متوسطة |
| 10 | 5-6 أسابيع | توسع عالمي/امتثال | عالية |
| 11 | 3-4 أسابيع | إنتاجية مطور | متوسطة |
| 12 | 4-6 أسابيع | Marketplace ونمو | متوسطة |

**إجمالي موسّع (تراكمي)**: +24–34 أسبوع إضافي بعد المرحلة 6 (قد تكون متداخلة جزئيًا)

---

### تحديث i18n للمراحل 7–12

| المرحلة | عنصر i18n متقدم | الناتج |
|---------|-----------------|--------|
| 7 | توحيد رسائل الأخطاء في مصدر واحد + pseudo-locale للاختبار | كشف النصوص الصلبة المتأخرة |
| 8 | دعم نماذج ML ثنائية اللغة + تخصيص Formatting للهجات | دقة أعلى في NER/Sentiment |
| 9 | ترجمة تقارير التكلفة + تنسيق عملات متعددة | عرض تكلفة بالعملة المحلية ديناميكيًا |
| 10 | سياسات لغة/بيانات إقليمية + fallback قانوني | التزام محلي دون تكرار نصوص |
| 11 | أدوات توليد مفاتيح تلقائية (CLI) | تسريع إضافة مفاتيح بدون أخطاء |
| 12 | Marketplace يدعم حزم لغة للإضافات | تثبيت حزمة لغة دون إعادة نشر |

---

### اعتبارات تنفيذ إضافية

1. اعتماد إستراتيجية Branching (Trunk-Based أو GitFlow مختزل) لضبط سرعة النشر.
2. إضافة فحص أمن Dependencies (Dependabot + Snyk) ضمن Quality Gate.
3. تحسين تخزين التسجيلات: Archive Tier بعد 90 يوم مع إعادة تشفير أخف.
4. إدراج Privacy by Design: ماسك PII في طبقة المعالجة قبل التخزين الطويل.
5. بناء Runbooks ثنائية اللغة للحوادث (Incident Response) مع قوالب جاهزة.

---

### مؤشرات تتبع استراتيجية (KPIs عليا للمراحل المتقدمة)

| المجال | المؤشر | الهدف الأولي |
|--------|--------|---------------|
| الموثوقية | MTTR | ≤ 30 دقيقة |
| الجودة | نسبة أخطاء النماذج | ≤ 20% انحراف عن خط الأساس |
| التكلفة | وفورات شهرية | ≥ 15% بعد تنفيذ FinOps |
| الإنتاجية | زمن إطلاق خدمة | < 30 دقيقة |
| النمو | تثبيت إضافات شهري | 10+ بعد إطلاق Marketplace |

---

### خريطة تبعية مختصرة للمراحل المتقدمة

```mermaid
6 (Reliability Baseline)
  ├─> 7 (Observability) → يمكّن 8 (AI) بتحسين بيانات السجلات
  ├─> 9 (FinOps) يعتمد تجميع بيانات التكلفة من 6/7
  ├─> 10 (Global) يحتاج سياسات أمن 6 وTelemetry 7
  ├─> 11 (Dev Productivity) يتطلب استقرار 6 وAutomation من 7
  └─> 12 (Marketplace) يستفيد من APIs ناضجة (5) وBilling (9)
```

---

### ملاحظات ختامية

- يمكن دمج بعض أعمال 7 و9 مبكرًا لتقليل هدر مع توسّع الاستخدام.
- البدء مبكرًا في pseudo-locale يزيد كشف التسريبات النصية.
- فصل واجهات Monitoring/FinOps عن المسار الحرج (Call Path) لتجنب التأثير.
- الاستثمار في Platform Engineering (مرحلة 11) يقلل زمن الميزات في 12.

